if __name__ == "__main__":
    credentials, project = connect()
    vertexai.init(credentials=credentials, project=project)

    REASON = ChatModel.from_pretrained("chat-bison@001")
    parameters = {"max_output_tokens": 256, "temperature": 0.2, "top_p": 0.8, "top_k": 40}
    chat = chat_model.start_chat(
        context="""You are a customer service representative of Cymbal.
    Here is Cymbal policy: How many days do I have time to use CANCEL FOR ANY REASON insurance?
    We offer free CANCEL FOR ANY REASON within 30 days of your purchase, with exceptions as described in our cancellation Policy.
    Certain items are designated as final sale and not eligible for exchanges. All on-sale purchases are final.
    """,
        examples=[
            InputOutputTextPair(
                input_text="""I was in a car accident last month and couldn\'t cancle the ticket in the 30 days time window. Can you make an exception for me?""",
                output_text="""I understand that you had an emergency and were unable to cancel your order within the 30-day window. I would be happy to make an exception for you. Please contact our customer service department at 0046-111111 and they will be able to assist you with your case.
    Once your request is approved, you will be refund with the cost. We will process your refund within 3-5 business days.""",
            ),
            InputOutputTextPair(
                input_text="""I forgot to cancel the order within 30 days. Can you make an exception for me?""",
                output_text="""I understand that you want to cancel the ticket, but we are unable to cancel your order since you have missed the 30-day window. Please let me know anything else I can assist you with.""",
            ),
        ],
    )
    response = chat.send_message(
        """I want to cancel my ticket. What\'s your cancel policy?""", **parameters
    )
    print(f"Response from Model: {response.text}")
    response = chat.send_message(
        """I ordered 30 days ago. Could you please help me with an exception? I was traveling abroad.""",
        **parameters,
    )
    print(f"Response from Model: {response.text}")